<!DOCTYPE html><html class="theme-next muse use-motion" lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3"><meta name="google-site-verification" content="dpIIVMzh-gRhFOYPiR6kCwKI0b-E0t-3pXeid6YJ7GQ"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet"><link href="/css/main.css?v=6.6.0" rel="stylesheet"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.6.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=6.6.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=6.6.0"><link rel="mask-icon" href="/images/logo.svg?v=6.6.0" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"6.6.0",sidebar:{position:"right",display:"hide",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,fastclick:!0,lazyload:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="必应壁纸(2019.07.11)© NASA"><meta name="keywords" content="Spring,MyBatis,MySQL,Redis"><meta property="og:type" content="article"><meta property="og:title" content="框架相关"><meta property="og:url" content="https://blog.xu-lin.top/框架相关/4193427372.html"><meta property="og:site_name" content="无用"><meta property="og:description" content="必应壁纸(2019.07.11)© NASA"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2021-03-30T18:56:08.369Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="框架相关"><meta name="twitter:description" content="必应壁纸(2019.07.11)© NASA"><link rel="alternate" href="/atom.xml" title="无用" type="application/atom+xml"><link rel="canonical" href="https://blog.xu-lin.top/框架相关/4193427372.html"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>框架相关 | 无用</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-129275423-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-129275423-1")</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-right page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">无用</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">有涯求无涯</h1></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类<span class="badge">6</span></a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签<span class="badge">62</span></a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档<span class="badge">33</span></a></li><li class="menu-item menu-item-about"><a href="/about" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://blog.xu-lin.top/框架相关/4193427372.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xulin"><meta itemprop="description" content="分享所知，做自己"><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="无用"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">框架相关</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-07-11 20:30:33" itemprop="dateCreated datePublished" datetime="2019-07-11T20:30:33+08:00">2019-07-11</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/核/" itemprop="url" rel="index"><span itemprop="name">核</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <a href="/框架相关/4193427372.html#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span><span class="post-comments-count valine-comment-count" data-xid="/框架相关/4193427372.html" itemprop="commentCount"></span></a></span><div class="post-symbolscount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span title="本文字数">12k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">11 分钟</span></div></div></header><div class="post-body han-init-context" itemprop="articleBody"><p></p><h1 id="Spring-SpringMVC"><a href="#Spring-SpringMVC" class="headerlink" title="Spring/SpringMVC"></a>Spring/SpringMVC</h1><h2 id="1-为什么要使用-Spring？"><a href="#1-为什么要使用-Spring？" class="headerlink" title="1.为什么要使用 Spring？"></a>1.为什么要使用 Spring？</h2><ul><li>spring 提供 ioc 技术，容器会帮你管理依赖的对象，从而不需要自己创建和管理依赖对象，更轻松的实现了程序的解耦</li><li>spring 提供了事务支持，使得事务操作变的更加方便</li><li>spring 提供了面向切片编程，这样可以更方便的处理某一类的问题</li><li>更方便的框架集成，spring 可以很方便的集成其他框架，比如 MyBatis、hibernate 等</li></ul><h2 id="2-什么是-aop？"><a href="#2-什么是-aop？" class="headerlink" title="2.什么是 aop？"></a>2.什么是 aop？</h2><p>aop 是面向切面编程，通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术<br>简单来说就是统一处理某一“切面”(类)的问题的编程思想，比如统一处理日志、异常等</p><h2 id="3-什么是-ioc？"><a href="#3-什么是-ioc？" class="headerlink" title="3.什么是 ioc？"></a>3.什么是 ioc？</h2><p>ioc：Inversion of Control(中文：控制反转)是 Spring 的核心，对于 spring 框架来说，就是由 Spring 来负责控制对象的生命周期和对象间的关系<br>简单来说，控制指的是当前对象对内部成员的控制权<br>控制反转指的是，这种控制权不由当前对象管理了，由其他(类，第三方容器)来管理</p><h2 id="4-Spring-有哪些主要模块？"><a href="#4-Spring-有哪些主要模块？" class="headerlink" title="4.Spring 有哪些主要模块？"></a>4.Spring 有哪些主要模块？</h2><ul><li>spring core：框架的最基础部分，提供 ioc 和依赖注入特性</li><li>spring context：构建于 core 封装包基础上的 context 封装包，提供了一种框架式的对象访问方法</li><li>spring dao：Data Access Object 提供了 JDBC 的抽象层</li><li>spring aop：提供了面向切面的编程实现，让你可以自定义拦截器、切点等</li><li>spring Web：提供了针对 Web 开发的集成特性，例如文件上传，利用 servlet listeners 进行 ioc 容器初始化和针对 Web 的 ApplicationContext</li><li>spring Web mvc：spring 中的 mvc 封装包提供了 Web 应用的 Model-View-Controller（MVC）的实现</li></ul><h2 id="5-Spring-常用的注入方式有哪些？"><a href="#5-Spring-常用的注入方式有哪些？" class="headerlink" title="5.Spring 常用的注入方式有哪些？"></a>5.Spring 常用的注入方式有哪些？</h2><ul><li>setter 属性注入</li><li>构造方法注入</li><li>注解方式注入</li></ul><h2 id="6-Spring-中的-bean-是线程安全吗？"><a href="#6-Spring-中的-bean-是线程安全吗？" class="headerlink" title="6.Spring 中的 bean 是线程安全吗？"></a>6.Spring 中的 bean 是线程安全吗？</h2><p>实际上大部分时候 spring bean 无状态的（比如 dao 类），所有某种程度上来说 bean 也是安全的<br>但如果 bean 有状态的话（比如 view model 对象），那就要开发者自己去保证线程安全了<br>最简单的就是改变 bean 的作用域，把“singleton”变更为“prototype”<br>这样请求 bean 相当于 new Bean()了，所以就可以保证线程安全了</p><ul><li>有状态就是有数据存储功能</li><li>无状态就是不会保存数据</li></ul><h2 id="7-Spring-支持几种-bean-的作用域？"><a href="#7-Spring-支持几种-bean-的作用域？" class="headerlink" title="7.Spring 支持几种 bean 的作用域？"></a>7.Spring 支持几种 bean 的作用域？</h2><ul><li>singleton：spring ioc 容器中只存在一个 bean 实例，bean 以单例模式存在，是系统默认值</li><li>prototype：每次从容器调用 bean 时都会创建一个新的示例，既每次 getBean()相当于执行 new Bean()操作</li></ul><p>Web 环境下的作用域：</p><ul><li>request：每次 http 请求都会创建一个 bean</li><li>session：同一个 http session 共享一个 bean 实例</li><li>global-session：用于 portlet 容器，因为每个 portlet 有单独的 session，globalsession 提供一个全局性的 http session</li></ul><p><strong>注意：</strong> 使用 prototype 作用域需要慎重的思考，因为频繁创建和销毁 bean 会带来很大的性能开销</p><h2 id="8-Spring-自动装配-bean-有哪些方式？"><a href="#8-Spring-自动装配-bean-有哪些方式？" class="headerlink" title="8.Spring 自动装配 bean 有哪些方式？"></a>8.Spring 自动装配 bean 有哪些方式？</h2><ul><li>no：默认值，表示没有自动装配，应使用显式 bean 引用进行装配</li><li>byName：它根据 bean 的名称注入对象依赖项</li><li>byType：它根据类型注入对象依赖项</li><li>构造函数：通过构造函数来注入依赖项，需要设置大量的参数</li><li>autodetect：容器首先通过构造函数使用 autowire 装配，如果不能，则通过 byType 自动装配</li></ul><h2 id="9-Spring-事务实现方式有哪些？"><a href="#9-Spring-事务实现方式有哪些？" class="headerlink" title="9.Spring 事务实现方式有哪些？"></a>9.Spring 事务实现方式有哪些？</h2><ul><li>声明式事务：声明式事务也有两种实现方式，基于 xml 配置文件的方式和注解方式（在类上添加 <a href="">@Transaction</a> 注解）</li><li>编码方式：提供编码的形式管理和维护事务</li></ul><h2 id="10-Spring-的事务隔离？"><a href="#10-Spring-的事务隔离？" class="headerlink" title="10. Spring 的事务隔离？"></a>10. Spring 的事务隔离？</h2><p>spring 有五大隔离级别，默认值为 ISOLATION_DEFAULT（使用数据库的设置），其他四个隔离级别和数据库的隔离级别一致：</p><ul><li>ISOLATION_DEFAULT：用底层数据库的设置隔离级别，数据库设置的是什么我就用什么</li><li>ISOLATION_READ_UNCOMMITTED：未提交读，最低隔离级别、事务未提交前，就可被其他事务读取（会出现幻读、脏读、不可重复读）</li><li>ISOLATION_READ_COMMITTED：提交读，一个事务提交后才能被其他事务读取到（会造成幻读、不可重复读），SQL server 的默认级别</li><li>ISOLATION_REPEATABLE_READ：可重复读，保证多次读取同一个数据时，其值都和事务开始时候的内容是一致，禁止读取到别的事务未提交的数据（会造成幻读），MySQL 的默认级别</li><li>ISOLATION_SERIALIZABLE：序列化，代价最高最可靠的隔离级别，该隔离级别能防止脏读、不可重复读、幻读</li></ul><p><strong>脏读</strong> ：表示一个事务能够读取另一个事务中还未提交的数据<br>比如，某个事务尝试插入记录 A，此时该事务还未提交，然后另一个事务尝试读取到了记录 A</p><p><strong>不可重复读</strong> ：是指在一个事务内，多次读同一数据</p><p><strong>幻读</strong> ：指同一个事务内多次查询返回的结果集不一样<br>比如同一个事务 A 第一次查询时候有 n 条记录，但是第二次同等条件下查询却有 n+1 条记录，这就好像产生了幻觉<br>发生幻读的原因也是另外一个事务新增或者删除或者修改了第一个事务结果集里面的数据，同一个记录的数据内容被修改了，所有数据行的记录就变多或者变少了</p><h2 id="11-SpringMVC-运行流程？"><a href="#11-SpringMVC-运行流程？" class="headerlink" title="11. SpringMVC 运行流程？"></a>11. SpringMVC 运行流程？</h2><ul><li>spring mvc 先将请求发送给 DispatcherServlet</li><li>DispatcherServlet 查询一个或多个 HandlerMapping，找到处理请求的 Controller</li><li>DispatcherServlet 再把请求提交到对应的 Controller</li><li>Controller 进行业务逻辑处理后，会返回一个 ModelAndView</li><li>Dispathcher 查询一个或多个 ViewResolver 视图解析器，找到 ModelAndView 对象指定的视图对象</li><li>视图对象负责渲染返回给客户端</li></ul><h2 id="12-SpringMVC-有哪些组件？"><a href="#12-SpringMVC-有哪些组件？" class="headerlink" title="12. SpringMVC 有哪些组件？"></a>12. SpringMVC 有哪些组件？</h2><ul><li>前置控制器 DispatcherServlet</li><li>映射控制器 HandlerMapping</li><li>处理器 Controller</li><li>模型和视图 ModelAndView</li><li>视图解析器 ViewResolver</li></ul><h2 id="13-RequestMapping-的作用是什么？"><a href="#13-RequestMapping-的作用是什么？" class="headerlink" title="13. @RequestMapping  的作用是什么？"></a>13. <a href="">@RequestMapping</a> 的作用是什么？</h2><p>将 http 请求映射到相应的类/方法上</p><h2 id="14-Autowired-的作用是什么？"><a href="#14-Autowired-的作用是什么？" class="headerlink" title="14. @Autowired  的作用是什么？"></a>14. <a href="">@Autowired</a> 的作用是什么？</h2><p><a href="">@Autowired</a> 它可以对类成员变量、方法及构造函数进行标注，完成自动装配的工作<br>通过<a href="">@Autowired</a> 的使用来消除 set/get 方法</p><h1 id="Spring-Boot-Spring-Cloud"><a href="#Spring-Boot-Spring-Cloud" class="headerlink" title="Spring Boot/Spring Cloud"></a>Spring Boot/Spring Cloud</h1><h2 id="15-什么是-spring-boot？"><a href="#15-什么是-spring-boot？" class="headerlink" title="15. 什么是 spring boot？"></a>15. 什么是 spring boot？</h2><p>spring boot 是为 spring 服务的，是用来简化新 spring 应用的初始搭建以及开发过程的</p><h2 id="16-为什么要用-spring-boot？"><a href="#16-为什么要用-spring-boot？" class="headerlink" title="16. 为什么要用 spring boot？"></a>16. 为什么要用 spring boot？</h2><ul><li>配置简单</li><li>独立运行</li><li>自动装配</li><li>无代码生成和 xml 配置</li><li>提供应用监控</li><li>易上手</li><li>提升开发效率</li></ul><h2 id="17-spring-boot-核心配置文件是什么？"><a href="#17-spring-boot-核心配置文件是什么？" class="headerlink" title="17. spring boot 核心配置文件是什么？"></a>17. spring boot 核心配置文件是什么？</h2><p>spring boot 核心的两个配置文件：</p><ul><li>bootstrap (. yml 或者 . properties)：boostrap 由父 ApplicationContext 加载的，比 applicaton 优先加载，且 boostrap 里面的属性不能被覆盖</li><li>application (. yml 或者 . properties)：用于 spring boot 项目的自动化配置</li></ul><h2 id="18-spring-boot-配置文件有哪几种类型？它们有什么区别？"><a href="#18-spring-boot-配置文件有哪几种类型？它们有什么区别？" class="headerlink" title="18. spring boot 配置文件有哪几种类型？它们有什么区别？"></a>18. spring boot 配置文件有哪几种类型？它们有什么区别？</h2><p>配置文件有 . properties 格式和 . yml 格式，它们主要的区别是书法风格不同<br>.properties 配置如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring. RabbitMQ. port=5672</span><br></pre></td></tr></table></figure><p>.yml 配置如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  RabbitMQ:</span></span><br><span class="line"><span class="attr">    port:</span> <span class="number">5672</span></span><br></pre></td></tr></table></figure><p>.yml 格式不支持 <a href="">@PropertySource</a> 注解导入</p><h2 id="19-spring-boot-有哪些方式可以实现热部署？"><a href="#19-spring-boot-有哪些方式可以实现热部署？" class="headerlink" title="19. spring boot 有哪些方式可以实现热部署？"></a>19. spring boot 有哪些方式可以实现热部署？</h2><ul><li>使用 devtools 启动热部署，添加 devtools 库，在配置文件中把 spring. devtools. restart. enabled 设置为 true</li><li>使用 Intellij Idea 编辑器，勾上自动编译或手动重新编译</li></ul><h2 id="20-jpa-和-hibernate-有什么区别？"><a href="#20-jpa-和-hibernate-有什么区别？" class="headerlink" title="20. jpa 和 hibernate 有什么区别？"></a>20. jpa 和 hibernate 有什么区别？</h2><p>jpa 全称 Java Persistence API，是 Java 持久化接口规范，hibernate 属于 jpa 的具体实现</p><h2 id="21-什么是-spring-cloud？"><a href="#21-什么是-spring-cloud？" class="headerlink" title="21. 什么是 spring cloud？"></a>21. 什么是 spring cloud？</h2><p>spring cloud 是一系列框架的有序集合<br>它利用 spring boot 的开发便利性巧妙地简化了分布式系统基础设施的开发，如服务发现注册、配置中心、消息总线、负载均衡、断路器、数据监控等，都可以用 spring boot 的开发风格做到一键启动和部署</p><h2 id="22-spring-cloud-断路器的作用是什么？"><a href="#22-spring-cloud-断路器的作用是什么？" class="headerlink" title="22. spring cloud 断路器的作用是什么？"></a>22. spring cloud 断路器的作用是什么？</h2><p>在分布式架构中，断路器模式的作用也是类似的<br>当某个服务单元发生故障（类似用电器发生短路）之后，通过断路器的故障监控（类似熔断保险丝），向调用方返回一个错误响应，而不是长时间的等待<br>这样就不会使得线程因调用故障服务被长时间占用不释放，避免了故障在分布式系统中的蔓延</p><h2 id="23-spring-cloud-的核心组件有哪些？"><a href="#23-spring-cloud-的核心组件有哪些？" class="headerlink" title="23. spring cloud 的核心组件有哪些？"></a>23. spring cloud 的核心组件有哪些？</h2><ul><li>Eureka：服务注册于发现</li><li>Feign：基于动态代理机制，根据注解和选择的机器，拼接请求 url 地址，发起请求</li><li>Ribbon：实现负载均衡，从一个服务的多台机器中选择一台</li><li>Hystrix：提供线程池，不同的服务走不同的线程池，实现了不同服务调用的隔离，避免了服务雪崩的问题</li><li>Zuul：网关管理，由 Zuul 网关转发请求给对应的服务</li></ul><h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><h2 id="24-MyBatis-中-和-的区别是什么？"><a href="#24-MyBatis-中-和-的区别是什么？" class="headerlink" title="24. MyBatis 中 #{}和 ${}的区别是什么？"></a>24. MyBatis 中 #{}和 ${}的区别是什么？</h2><ul><li><code>\#{}</code>是预编译处理</li><li><code>${}</code>是字符替换</li></ul><p>在使用 <code>#{}</code>时，MyBatis 会将 SQL 中的 <code>#{}</code>替换成“?”，配合 PreparedStatement 的 set 方法赋值，这样可以有效的防止 SQL 注入，保证程序的运行安全</p><h2 id="25-MyBatis-有几种分页方式？"><a href="#25-MyBatis-有几种分页方式？" class="headerlink" title="25. MyBatis 有几种分页方式？"></a>25. MyBatis 有几种分页方式？</h2><p>分页方式：逻辑分页和物理分页<br><strong>逻辑分页：</strong> 使用 MyBatis 自带的 RowBounds 进行分页，它是一次性查询很多数据，然后在数据中再进行检索<br><strong>物理分页：</strong> 自己手写 SQL 分页或使用分页插件 PageHelper，去数据库查询指定条数的分页数据的形式</p><h2 id="26-RowBounds-是一次性查询全部结果吗？为什么？"><a href="#26-RowBounds-是一次性查询全部结果吗？为什么？" class="headerlink" title="26. RowBounds 是一次性查询全部结果吗？为什么？"></a>26. RowBounds 是一次性查询全部结果吗？为什么？</h2><p>RowBounds 表面是在“所有”数据中检索数据，其实并非是一次性查询出所有数据<br>因为 MyBatis 是对 jdbc 的封装，在 jdbc 驱动中有一个 Fetch Size 的配置，它规定了每次最多从数据库查询多少条数据，假如你要查询更多数据，它会在你执行 next()的时候，去查询更多的数据<br>就好比你去自动取款机取 10000 元，但取款机每次最多能取 2500 元，所以你要取 4 次才能把钱取完。只是对于 jdbc 来说，当你调用 next()的时候会自动帮你完成查询工作。这样做的好处可以有效的防止内存溢出</p><h2 id="27-MyBatis-逻辑分页和物理分页的区别是什么？"><a href="#27-MyBatis-逻辑分页和物理分页的区别是什么？" class="headerlink" title="27. MyBatis 逻辑分页和物理分页的区别是什么？"></a>27. MyBatis 逻辑分页和物理分页的区别是什么？</h2><ul><li>逻辑分页是一次性查询很多数据，然后再在结果中检索分页的数据。这样做弊端是需要消耗大量的内存、有内存溢出的风险、对数据库压力较大</li><li>物理分页是从数据库查询指定条数的数据，弥补了一次性全部查出的所有数据的种种缺点，比如需要大量的内存，对数据库查询压力较大等问题</li></ul><h2 id="28-MyBatis-是否支持延迟加载？延迟加载的原理是什么？"><a href="#28-MyBatis-是否支持延迟加载？延迟加载的原理是什么？" class="headerlink" title="28. MyBatis 是否支持延迟加载？延迟加载的原理是什么？"></a>28. MyBatis 是否支持延迟加载？延迟加载的原理是什么？</h2><p>MyBatis 支持延迟加载，设置 lazyLoadingEnabled=true 即可<br>延迟加载的原理的是调用的时候触发加载，而不是在初始化的时候就加载信息<br>比如调用 a. getB(). getName()，这个时候发现 a. getB() 的值为 null，此时会单独触发事先保存好的关联 B 对象的 SQL，先查询出来 B，然后再调用 a. setB(b)，而这时候再调用 a. getB(). getName() 就有值了，这就是延迟加载的基本原理</p><h2 id="29-MyBatis-的一级缓存和二级缓存？"><a href="#29-MyBatis-的一级缓存和二级缓存？" class="headerlink" title="29. MyBatis 的一级缓存和二级缓存？"></a>29. MyBatis 的一级缓存和二级缓存？</h2><ul><li>一级缓存：基于 PerpetualCache 的 HashMap 本地缓存，它的声明周期是和 SQLSession 一致的，有多个 SQLSession 或者分布式的环境中数据库操作，可能会出现脏数据。当 Session flush 或 close 之后，该 Session 中的所有 Cache 就将清空，默认一级缓存是开启的</li><li>二级缓存：也是基于 PerpetualCache 的 HashMap 本地缓存，不同在于其存储作用域为 Mapper 级别的，如果多个 SQLSession 之间需要共享缓存，则需要使用到二级缓存，并且二级缓存可自定义存储源，如 Ehcache。默认不打开二级缓存，要开启二级缓存，使用二级缓存属性类需要实现 Serializable 序列化接口(可用来保存对象的状态)</li></ul><p>开启二级缓存数据查询流程：二级缓存 -&gt; 一级缓存 -&gt; 数据库</p><p>缓存更新机制：当某一个作用域(一级缓存 Session/二级缓存 Mapper)进行了 C/U/D 操作后，默认该作用域下所有 select 中的缓存将被 clear</p><h2 id="30-MyBatis-和-hibernate-的区别有哪些？"><a href="#30-MyBatis-和-hibernate-的区别有哪些？" class="headerlink" title="30. MyBatis 和 hibernate 的区别有哪些？"></a>30. MyBatis 和 hibernate 的区别有哪些？</h2><ul><li>灵活性：MyBatis 更加灵活，自己可以写 SQL 语句，使用起来比较方便</li><li>可移植性：MyBatis 有很多自己写的 SQL，因为每个数据库的 SQL 可以不相同，所以可移植性比较差</li><li>学习和使用门槛：MyBatis 入门比较简单，使用门槛也更低</li><li>二级缓存：hibernate 拥有更好的二级缓存，它的二级缓存可以自行更换为第三方的二级缓存</li></ul><h2 id="31-MyBatis-有哪些执行器（Executor）？"><a href="#31-MyBatis-有哪些执行器（Executor）？" class="headerlink" title="31. MyBatis 有哪些执行器（Executor）？"></a>31. MyBatis 有哪些执行器（Executor）？</h2><p>MyBatis 有三种基本的 Executor 执行器：</p><ul><li>SimpleExecutor：每执行一次 update 或 select 就开启一个 Statement 对象，用完立刻关闭 Statement 对象</li><li>ReuseExecutor：执行 update 或 select，以 SQL 作为 key 查找 Statement 对象，存在就使用，不存在就创建，用完后不关闭 Statement 对象，而是放置于 Map 内供下一次使用。简言之，就是重复使用 Statement 对象</li><li>BatchExecutor：执行 update（没有 select，jdbc 批处理不支持 select），将所有 SQL 都添加到批处理中（addBatch()），等待统一执行（executeBatch()），它缓存了多个 Statement 对象，每个 Statement 对象都是 addBatch()完毕后，等待逐一执行 executeBatch()批处理，与 jdbc 批处理相同</li></ul><h2 id="32-MyBatis-分页插件的实现原理是什么？"><a href="#32-MyBatis-分页插件的实现原理是什么？" class="headerlink" title="32. MyBatis 分页插件的实现原理是什么？"></a>32. MyBatis 分页插件的实现原理是什么？</h2><p>分页插件的基本原理是使用 MyBatis 提供的插件接口，实现自定义插件，在插件的拦截方法内拦截待执行的 SQL，然后重写 SQL，根据 dialect 方言，添加对应的物理分页语句和物理分页参数</p><h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><h2 id="33-数据库的三范式是什么？"><a href="#33-数据库的三范式是什么？" class="headerlink" title="33. 数据库的三范式是什么？"></a>33. 数据库的三范式是什么？</h2><ul><li>第一范式：强调的是列的原子性，即数据库表的每一列都是不可分割的原子数据项</li><li>第二范式：要求实体的属性完全依赖于主关键字。所谓完全依赖是指不能存在仅依赖主关键字一部分的属性</li><li>第三范式：任何非主属性不依赖于其它非主属性</li></ul><h2 id="34-一张自增表里面总共有-7-条数据，删除了最后-2-条数据，重启-MySQL-数据库，又插入了一条数据，此时-id-是几？"><a href="#34-一张自增表里面总共有-7-条数据，删除了最后-2-条数据，重启-MySQL-数据库，又插入了一条数据，此时-id-是几？" class="headerlink" title="34. 一张自增表里面总共有 7 条数据，删除了最后 2 条数据，重启 MySQL 数据库，又插入了一条数据，此时 id 是几？"></a>34. 一张自增表里面总共有 7 条数据，删除了最后 2 条数据，重启 MySQL 数据库，又插入了一条数据，此时 id 是几？</h2><ul><li>表类型如果是 MyISAM ，那 id 就是 8</li><li>表类型如果是 InnoDB，那 id 就是 6</li></ul><p>InnoDB 表只会把自增主键的最大 id 记录在内存中，所以重启之后会导致最大 id 丢失</p><h2 id="35-如何获取当前数据库版本？"><a href="#35-如何获取当前数据库版本？" class="headerlink" title="35. 如何获取当前数据库版本？"></a>35. 如何获取当前数据库版本？</h2><p>使用 select version() 获取当前 MySQL 数据库版本</p><h2 id="36-说一下-ACID-是什么？"><a href="#36-说一下-ACID-是什么？" class="headerlink" title="36. 说一下 ACID 是什么？"></a>36. 说一下 ACID 是什么？</h2><ul><li>Atomicity（原子性）：一个事务（transaction）中的所有操作，或者全部完成，或者全部不完成，不会结束在中间某个环节</li></ul><p>事务在执行过程中发生错误，会被恢复（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样</p><p>即，事务不可分割、不可约简</p><ul><li>Consistency（一致性）：在事务开始之前和事务结束以后，数据库的完整性没有被破坏</li></ul><p>这表示写入的资料必须完全符合所有的预设约束、触发器、级联回滚等</p><ul><li>Isolation（隔离性）：数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致</li></ul><p>事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）</p><ul><li>Durability（持久性）：事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失</li></ul><h2 id="37-char-和-varchar-的区别是什么？"><a href="#37-char-和-varchar-的区别是什么？" class="headerlink" title="37. char 和 varchar 的区别是什么？"></a>37. char 和 varchar 的区别是什么？</h2><ul><li><strong>char(n)</strong> ：固定长度类型，比如订阅 char(10)，当你输入”abc”三个字符的时候，它们占的空间还是 10 个字节，其他 7 个是空字节</li></ul><p>优点：效率高<br>缺点：占用空间<br>适用场景：存储密码的 md5 值，固定长度的，使用 char 非常合适</p><ul><li><strong>varchar(n)</strong> ：可变长度，存储的值是每个值占用的字节再加上一个用来记录其长度的字节的长度</li></ul><p>所以，从空间上考虑 varcahr 比较合适；从效率上考虑 char 比较合适，二者使用需要权衡</p><h2 id="38-float-和-double-的区别是什么？"><a href="#38-float-和-double-的区别是什么？" class="headerlink" title="38. float 和 double 的区别是什么？"></a>38. float 和 double 的区别是什么？</h2><ul><li>float 最多可以存储 8 位的十进制数，并在内存中占 4 字节</li><li>double 最可可以存储 16 位的十进制数，并在内存中占 8 字节</li></ul><h2 id="39-MySQL-的内连接、左连接、右连接有什么区别？"><a href="#39-MySQL-的内连接、左连接、右连接有什么区别？" class="headerlink" title="39. MySQL 的内连接、左连接、右连接有什么区别？"></a>39. MySQL 的内连接、左连接、右连接有什么区别？</h2><p>内连接：inner join，把匹配的关联数据显示出来<br>左连接：left join，左边的表全部显示出来，右边的表显示出符合条件的数据<br>右连接：right join，右连接与左连接正好相反</p><h2 id="40-MySQL-索引是怎么实现的？"><a href="#40-MySQL-索引是怎么实现的？" class="headerlink" title="40. MySQL 索引是怎么实现的？"></a>40. MySQL 索引是怎么实现的？</h2><p>索引是满足某种特定查找算法的数据结构，而这些数据结构会以某种方式指向数据，从而实现高效查找数据<br>具体来说 MySQL 中的索引，不同的数据引擎实现有所不同，但目前主流的数据库引擎的索引都是 B+ 树实现的，B+ 树的搜索效率，可以到达二分法的性能，找到数据区域之后就找到了完整的数据结构了，所有索引的性能也是更好的</p><h2 id="41-怎么验证-MySQL-的索引是否满足需求？"><a href="#41-怎么验证-MySQL-的索引是否满足需求？" class="headerlink" title="41. 怎么验证 MySQL 的索引是否满足需求？"></a>41. 怎么验证 MySQL 的索引是否满足需求？</h2><p>使用 explain 查看 SQL 是如何执行查询语句的，从而分析你的索引是否满足需求<br>explain 语法：explain select * from table where type=1</p><h2 id="42-数据库的事务隔离？"><a href="#42-数据库的事务隔离？" class="headerlink" title="42. 数据库的事务隔离？"></a>42. 数据库的事务隔离？</h2><p>MySQL 的事务隔离是在 MySQL. ini 配置文件里添加的，在文件的最后添加：</p><blockquote><p>transaction-isolation = REPEATABLE-READ</p></blockquote><p>可用的配置值：READ-UNCOMMITTED、READ-COMMITTED、REPEATABLE-READ、SERIALIZABLE</p><ul><li>READ-UNCOMMITTED：未提交读，最低隔离级别、事务未提交前，就可被其他事务读取（会出现幻读、脏读、不可重复读）</li><li>READ-COMMITTED：提交读，一个事务提交后才能被其他事务读取到（会造成幻读、不可重复读）</li><li>REPEATABLE-READ：可重复读，默认级别，保证多次读取同一个数据时，其值都和事务开始时候的内容是一致，禁止读取到别的事务未提交的数据（会造成幻读）</li><li>SERIALIZABLE：序列化，代价最高最可靠的隔离级别，该隔离级别能防止脏读、不可重复读、幻读</li></ul><p><strong>脏读</strong> ：表示一个事务能够读取另一个事务中还未提交的数据<br>比如，某个事务尝试插入记录 A，此时该事务还未提交，然后另一个事务尝试读取到了记录 A</p><p><strong>不可重复读</strong> ：是指在一个事务内，多次读同一数据</p><p><strong>幻读</strong> ：指同一个事务内多次查询返回的结果集不一样<br>比如同一个事务 A 第一次查询时候有 n 条记录，但是第二次同等条件下查询却有 n+1 条记录,这就好像产生了幻觉<br>发生幻读的原因也是另外一个事务新增或者删除或者修改了第一个事务结果集里面的数据，同一个记录的数据内容被修改了，所有数据行的记录就变多或者变少了</p><h2 id="43-MySQL-常用的引擎？"><a href="#43-MySQL-常用的引擎？" class="headerlink" title="43. MySQL 常用的引擎？"></a>43. MySQL 常用的引擎？</h2><ul><li>InnoDB 引擎：mysql 5.1 后默认的数据库引擎，提供了对数据库 acid 事务的支持，并且还提供了行级锁和外键的约束，它的设计的目标就是处理大数据容量的数据库系统</li></ul><p>MySQL 运行的时候，InnoDB 会在内存中建立缓冲池，用于缓冲数据和索引</p><p>但是该引擎是不支持全文搜索，同时启动也比较的慢，它是不会保存表的行数的，所以当进行 select count(*) from table 指令的时候，需要进行扫描全表</p><p>由于锁的粒度小，写操作是不会锁定全表的,所以在并发度较高的场景下使用会提升效率的</p><ul><li>MyIASM 引擎：不提供事务的支持，也不支持行级锁和外键</li></ul><p>因此当执行插入和更新语句时，即执行写操作的时候需要锁定这个表，所以会导致效率会降低</p><p>不过和 InnoDB 不同的是，MyIASM 引擎是保存了表的行数，于是当进行 select count(*) from table 语句时，可以直接的读取已经保存的值而不需要进行扫描全表。所以，如果表的读操作远远多于写操作时，并且不需要事务的支持的，可以将 MyIASM 作为数据库引擎的首选</p><h2 id="44-MySQL-的行锁和表锁？"><a href="#44-MySQL-的行锁和表锁？" class="headerlink" title="44. MySQL 的行锁和表锁？"></a>44. MySQL 的行锁和表锁？</h2><p>MyISAM 只支持表锁，InnoDB 支持表锁和行锁，默认为行锁</p><ul><li>表级锁：开销小，加锁快，不会出现死锁。锁定粒度大，发生锁冲突的概率最高，并发量最低</li><li>行级锁：开销大，加锁慢，会出现死锁。锁力度小，发生锁冲突的概率小，并发度最高</li></ul><h2 id="45-乐观锁和悲观锁？"><a href="#45-乐观锁和悲观锁？" class="headerlink" title="45. 乐观锁和悲观锁？"></a>45. 乐观锁和悲观锁？</h2><ul><li>乐观锁：每次去拿数据的时候都认为别人不会修改，所以不会上锁，但是在提交更新的时候会判断一下在此期间别人有没有去更新这个数据</li><li>悲观锁：每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人想拿这个数据就会阻止，直到这个锁被释放</li></ul><p>数据库的乐观锁需要自己实现，在表里面添加一个 version 字段，每次修改成功值加 1，这样每次修改的时候先对比一下，自己拥有的 version 和数据库现在的 version 是否一致，如果不一致就不修改，这样就实现了乐观锁</p><h2 id="46-MySQL-问题排查都有哪些手段？"><a href="#46-MySQL-问题排查都有哪些手段？" class="headerlink" title="46. MySQL 问题排查都有哪些手段？"></a>46. MySQL 问题排查都有哪些手段？</h2><ul><li>使用 show processlist 命令查看当前所有连接信息</li><li>使用 explain 命令查询 SQL 语句执行计划</li><li>开启慢查询日志，查看慢查询的 SQL</li></ul><h2 id="47-如何做-MySQL-的性能优化？"><a href="#47-如何做-MySQL-的性能优化？" class="headerlink" title="47. 如何做 MySQL 的性能优化？"></a>47. 如何做 MySQL 的性能优化？</h2><ul><li>为搜索字段创建索引</li><li>避免使用 select *，列出需要查询的字段</li><li>垂直分割分表</li><li>选择正确的存储引擎</li></ul><h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><h2 id="48-Redis-是什么？都有哪些使用场景？"><a href="#48-Redis-是什么？都有哪些使用场景？" class="headerlink" title="48. Redis 是什么？都有哪些使用场景？"></a>48. Redis 是什么？都有哪些使用场景？</h2><p>Redis 是一个使用 C 语言开发的高速缓存数据库<br>Redis 使用场景：</p><ul><li>记录帖子点赞数、点击数、评论数</li><li>缓存近期热帖</li><li>缓存文章详情信息</li><li>记录用户会话信息</li></ul><h2 id="49-Redis-有哪些功能？"><a href="#49-Redis-有哪些功能？" class="headerlink" title="49. Redis 有哪些功能？"></a>49. Redis 有哪些功能？</h2><ul><li>数据缓存功能</li><li>分布式锁的功能</li><li>支持数据持久化</li><li>支持事务</li><li>支持消息队列</li></ul><h2 id="50-Redis-为什么是单线程的？"><a href="#50-Redis-为什么是单线程的？" class="headerlink" title="50. Redis 为什么是单线程的？"></a>50. Redis 为什么是单线程的？</h2><p>因为 cpu 不是 Redis 的瓶颈，Redis 的瓶颈最有可能是机器内存或者网络带宽<br>既然单线程容易实现，而且 cpu 又不会成为瓶颈，那就顺理成章地采用单线程的方案了<br>关于 Redis 的性能，官方网站也有，普通笔记本轻松处理每秒几十万的请求<br>而且单线程并不代表就慢 nginx 和 nodejs 也都是高性能单线程的代表</p><h2 id="51-什么是缓存穿透？怎么解决？"><a href="#51-什么是缓存穿透？怎么解决？" class="headerlink" title="51. 什么是缓存穿透？怎么解决？"></a>51. 什么是缓存穿透？怎么解决？</h2><p>缓存穿透：指查询一个一定不存在的数据，由于缓存是不命中时需要从数据库查询，查不到数据则不写入缓存，这将导致这个不存在的数据每次请求都要到数据库去查询，造成缓存穿透</p><p>解决方案：最简单粗暴的方法如果一个查询返回的数据为空（不管是数据不存在，还是系统故障），我们就把这个空结果进行缓存，但它的过期时间会很短，最长不超过五分钟</p><h2 id="52-Redis-支持的数据类型有哪些？"><a href="#52-Redis-支持的数据类型有哪些？" class="headerlink" title="52. Redis 支持的数据类型有哪些？"></a>52. Redis 支持的数据类型有哪些？</h2><p>Redis 支持的数据类型：string（字符串）、list（列表）、hash（字典）、set（集合）、zset（有序集合）</p><h2 id="53-jedis-和-Redisson-有哪些区别？"><a href="#53-jedis-和-Redisson-有哪些区别？" class="headerlink" title="53. jedis 和 Redisson 有哪些区别？"></a>53. jedis 和 Redisson 有哪些区别？</h2><ul><li>jedis：提供了比较全面的 Redis 命令的支持</li><li>Redisson：实现了分布式和可扩展的 Java 数据结构，与 jedis 相比 Redisson 的功能相对简单，不支持排序、事务、管道、分区等 Redis 特性</li></ul><h2 id="54-怎么保证缓存和数据库数据的一致性？"><a href="#54-怎么保证缓存和数据库数据的一致性？" class="headerlink" title="54. 怎么保证缓存和数据库数据的一致性？"></a>54. 怎么保证缓存和数据库数据的一致性？</h2><ul><li>合理设置缓存的过期时间</li><li>新增、更改、删除数据库操作时同步更新 Redis，可以使用事物机制来保证数据的一致性</li></ul><h2 id="55-Redis-持久化有几种方式？"><a href="#55-Redis-持久化有几种方式？" class="headerlink" title="55. Redis 持久化有几种方式？"></a>55. Redis 持久化有几种方式？</h2><p>Redis 的持久化有两种方式，或者说有两种策略：</p><ul><li>RDB（Redis Database）：指定的时间间隔能对你的数据进行快照存储</li><li>AOF（Append Only File）：每一个收到的写命令都通过 write 函数追加到文件中</li></ul><h2 id="56-Redis-怎么实现分布式锁？"><a href="#56-Redis-怎么实现分布式锁？" class="headerlink" title="56. Redis 怎么实现分布式锁？"></a>56. Redis 怎么实现分布式锁？</h2><p>Redis 分布式锁其实就是在系统里面占一个“坑”，其他程序也要占“坑”的时候，占用成功了就可以继续执行，失败了就只能放弃或稍后重试<br>占坑一般使用 setnx(set if not exists)指令，只允许被一个程序占有，使用完调用 del 释放锁</p><h2 id="57-Redis-分布式锁有什么缺陷？"><a href="#57-Redis-分布式锁有什么缺陷？" class="headerlink" title="57. Redis 分布式锁有什么缺陷？"></a>57. Redis 分布式锁有什么缺陷？</h2><p>Redis 分布式锁不能解决超时的问题，分布式锁有一个超时时间，程序的执行如果超出了锁的超时时间就会出现问题</p><h2 id="58-Redis-如何做内存优化？"><a href="#58-Redis-如何做内存优化？" class="headerlink" title="58. Redis 如何做内存优化？"></a>58. Redis 如何做内存优化？</h2><p>尽量使用 Redis 的散列表，把相关的信息放到散列表里面存储，而不是把每个字段单独存储，这样可以有效的减少内存使用</p><p>比如将 Web 系统的用户对象，应该放到散列表里面再整体存储到 Redis，而不是把用户的姓名、年龄、密码、邮箱等字段分别设置 key 进行存储</p><h2 id="59-Redis-淘汰策略有哪些？"><a href="#59-Redis-淘汰策略有哪些？" class="headerlink" title="59. Redis 淘汰策略有哪些？"></a>59. Redis 淘汰策略有哪些？</h2><ul><li>volatile-lru：从已设置过期时间的数据集（server. db[i]. expires）中挑选最近最少使用的数据淘汰</li><li>volatile-ttl：从已设置过期时间的数据集（server. db[i]. expires）中挑选将要过期的数据淘汰</li><li>volatile-random：从已设置过期时间的数据集（server. db[i]. expires）中任意选择数据淘汰</li><li>allkeys-lru：从数据集（server. db[i]. dict）中挑选最近最少使用的数据淘汰</li><li>allkeys-random：从数据集（server. db[i]. dict）中任意选择数据淘汰</li><li>no-enviction（驱逐）：禁止驱逐数据</li></ul><h2 id="60-Redis-常见的性能问题有哪些？该如何解决？"><a href="#60-Redis-常见的性能问题有哪些？该如何解决？" class="headerlink" title="60. Redis 常见的性能问题有哪些？该如何解决？"></a>60. Redis 常见的性能问题有哪些？该如何解决？</h2><ul><li>主服务器写内存快照，会阻塞主线程的工作，当快照比较大时对性能影响是非常大的，会间断性暂停服务，所以主服务器最好不要写内存快照</li><li>Redis 主从复制的性能问题，为了主从复制的速度和连接的稳定性，主从库最好在同一个局域网内</li></ul></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------本文结束，感谢阅读-------------</div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong> xulin</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://blog.xu-lin.top/框架相关/4193427372.html" title="框架相关">https://blog.xu-lin.top/框架相关/4193427372.html</a></li><li class="post-copyright-license"><strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Spring/" rel="tag"><i class="fa fa-tag"></i> Spring</a><a href="/tags/MyBatis/" rel="tag"><i class="fa fa-tag"></i> MyBatis</a><a href="/tags/MySQL/" rel="tag"><i class="fa fa-tag"></i> MySQL</a><a href="/tags/Redis/" rel="tag"><i class="fa fa-tag"></i> Redis</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/JAVA相关知识/1934514025.html" rel="next" title="JAVA相关知识"><i class="fa fa-chevron-left"></i> JAVA相关知识</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/JAVA虚拟机/2158833482.html" rel="prev" title="JAVA虚拟机">JAVA虚拟机<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="xulin"><p class="site-author-name" itemprop="name">xulin</p><p class="site-description motion-element" itemprop="description">分享所知，做自己</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives"><span class="site-state-item-count">33</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">62</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Aqpcet" title="GitHub &rarr; https://github.com/Aqpcet" rel="noopener" target="_blank">GitHub</a></span> <span class="links-of-author-item"><a href="https://gitee.com/Aqpcet" title="Gitee &rarr; https://gitee.com/Aqpcet" rel="noopener" target="_blank">Gitee</a></span></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-SpringMVC"><span class="nav-number">1.</span> <span class="nav-text">Spring/SpringMVC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-为什么要使用-Spring？"><span class="nav-number">1.1.</span> <span class="nav-text">1.为什么要使用 Spring？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-什么是-aop？"><span class="nav-number">1.2.</span> <span class="nav-text">2.什么是 aop？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-什么是-ioc？"><span class="nav-number">1.3.</span> <span class="nav-text">3.什么是 ioc？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Spring-有哪些主要模块？"><span class="nav-number">1.4.</span> <span class="nav-text">4.Spring 有哪些主要模块？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Spring-常用的注入方式有哪些？"><span class="nav-number">1.5.</span> <span class="nav-text">5.Spring 常用的注入方式有哪些？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-Spring-中的-bean-是线程安全吗？"><span class="nav-number">1.6.</span> <span class="nav-text">6.Spring 中的 bean 是线程安全吗？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-Spring-支持几种-bean-的作用域？"><span class="nav-number">1.7.</span> <span class="nav-text">7.Spring 支持几种 bean 的作用域？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-Spring-自动装配-bean-有哪些方式？"><span class="nav-number">1.8.</span> <span class="nav-text">8.Spring 自动装配 bean 有哪些方式？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-Spring-事务实现方式有哪些？"><span class="nav-number">1.9.</span> <span class="nav-text">9.Spring 事务实现方式有哪些？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-Spring-的事务隔离？"><span class="nav-number">1.10.</span> <span class="nav-text">10. Spring 的事务隔离？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-SpringMVC-运行流程？"><span class="nav-number">1.11.</span> <span class="nav-text">11. SpringMVC 运行流程？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-SpringMVC-有哪些组件？"><span class="nav-number">1.12.</span> <span class="nav-text">12. SpringMVC 有哪些组件？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-RequestMapping-的作用是什么？"><span class="nav-number">1.13.</span> <span class="nav-text">13. @RequestMapping 的作用是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-Autowired-的作用是什么？"><span class="nav-number">1.14.</span> <span class="nav-text">14. @Autowired 的作用是什么？</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-Boot-Spring-Cloud"><span class="nav-number">2.</span> <span class="nav-text">Spring Boot/Spring Cloud</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#15-什么是-spring-boot？"><span class="nav-number">2.1.</span> <span class="nav-text">15. 什么是 spring boot？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-为什么要用-spring-boot？"><span class="nav-number">2.2.</span> <span class="nav-text">16. 为什么要用 spring boot？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-spring-boot-核心配置文件是什么？"><span class="nav-number">2.3.</span> <span class="nav-text">17. spring boot 核心配置文件是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#18-spring-boot-配置文件有哪几种类型？它们有什么区别？"><span class="nav-number">2.4.</span> <span class="nav-text">18. spring boot 配置文件有哪几种类型？它们有什么区别？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#19-spring-boot-有哪些方式可以实现热部署？"><span class="nav-number">2.5.</span> <span class="nav-text">19. spring boot 有哪些方式可以实现热部署？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-jpa-和-hibernate-有什么区别？"><span class="nav-number">2.6.</span> <span class="nav-text">20. jpa 和 hibernate 有什么区别？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-什么是-spring-cloud？"><span class="nav-number">2.7.</span> <span class="nav-text">21. 什么是 spring cloud？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-spring-cloud-断路器的作用是什么？"><span class="nav-number">2.8.</span> <span class="nav-text">22. spring cloud 断路器的作用是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#23-spring-cloud-的核心组件有哪些？"><span class="nav-number">2.9.</span> <span class="nav-text">23. spring cloud 的核心组件有哪些？</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MyBatis"><span class="nav-number">3.</span> <span class="nav-text">MyBatis</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#24-MyBatis-中-和-的区别是什么？"><span class="nav-number">3.1.</span> <span class="nav-text">24. MyBatis 中 #{}和 ${}的区别是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-MyBatis-有几种分页方式？"><span class="nav-number">3.2.</span> <span class="nav-text">25. MyBatis 有几种分页方式？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#26-RowBounds-是一次性查询全部结果吗？为什么？"><span class="nav-number">3.3.</span> <span class="nav-text">26. RowBounds 是一次性查询全部结果吗？为什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#27-MyBatis-逻辑分页和物理分页的区别是什么？"><span class="nav-number">3.4.</span> <span class="nav-text">27. MyBatis 逻辑分页和物理分页的区别是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#28-MyBatis-是否支持延迟加载？延迟加载的原理是什么？"><span class="nav-number">3.5.</span> <span class="nav-text">28. MyBatis 是否支持延迟加载？延迟加载的原理是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#29-MyBatis-的一级缓存和二级缓存？"><span class="nav-number">3.6.</span> <span class="nav-text">29. MyBatis 的一级缓存和二级缓存？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#30-MyBatis-和-hibernate-的区别有哪些？"><span class="nav-number">3.7.</span> <span class="nav-text">30. MyBatis 和 hibernate 的区别有哪些？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#31-MyBatis-有哪些执行器（Executor）？"><span class="nav-number">3.8.</span> <span class="nav-text">31. MyBatis 有哪些执行器（Executor）？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#32-MyBatis-分页插件的实现原理是什么？"><span class="nav-number">3.9.</span> <span class="nav-text">32. MyBatis 分页插件的实现原理是什么？</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL"><span class="nav-number">4.</span> <span class="nav-text">MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#33-数据库的三范式是什么？"><span class="nav-number">4.1.</span> <span class="nav-text">33. 数据库的三范式是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#34-一张自增表里面总共有-7-条数据，删除了最后-2-条数据，重启-MySQL-数据库，又插入了一条数据，此时-id-是几？"><span class="nav-number">4.2.</span> <span class="nav-text">34. 一张自增表里面总共有 7 条数据，删除了最后 2 条数据，重启 MySQL 数据库，又插入了一条数据，此时 id 是几？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#35-如何获取当前数据库版本？"><span class="nav-number">4.3.</span> <span class="nav-text">35. 如何获取当前数据库版本？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#36-说一下-ACID-是什么？"><span class="nav-number">4.4.</span> <span class="nav-text">36. 说一下 ACID 是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#37-char-和-varchar-的区别是什么？"><span class="nav-number">4.5.</span> <span class="nav-text">37. char 和 varchar 的区别是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#38-float-和-double-的区别是什么？"><span class="nav-number">4.6.</span> <span class="nav-text">38. float 和 double 的区别是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#39-MySQL-的内连接、左连接、右连接有什么区别？"><span class="nav-number">4.7.</span> <span class="nav-text">39. MySQL 的内连接、左连接、右连接有什么区别？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#40-MySQL-索引是怎么实现的？"><span class="nav-number">4.8.</span> <span class="nav-text">40. MySQL 索引是怎么实现的？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#41-怎么验证-MySQL-的索引是否满足需求？"><span class="nav-number">4.9.</span> <span class="nav-text">41. 怎么验证 MySQL 的索引是否满足需求？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#42-数据库的事务隔离？"><span class="nav-number">4.10.</span> <span class="nav-text">42. 数据库的事务隔离？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#43-MySQL-常用的引擎？"><span class="nav-number">4.11.</span> <span class="nav-text">43. MySQL 常用的引擎？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#44-MySQL-的行锁和表锁？"><span class="nav-number">4.12.</span> <span class="nav-text">44. MySQL 的行锁和表锁？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#45-乐观锁和悲观锁？"><span class="nav-number">4.13.</span> <span class="nav-text">45. 乐观锁和悲观锁？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#46-MySQL-问题排查都有哪些手段？"><span class="nav-number">4.14.</span> <span class="nav-text">46. MySQL 问题排查都有哪些手段？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#47-如何做-MySQL-的性能优化？"><span class="nav-number">4.15.</span> <span class="nav-text">47. 如何做 MySQL 的性能优化？</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis"><span class="nav-number">5.</span> <span class="nav-text">Redis</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#48-Redis-是什么？都有哪些使用场景？"><span class="nav-number">5.1.</span> <span class="nav-text">48. Redis 是什么？都有哪些使用场景？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#49-Redis-有哪些功能？"><span class="nav-number">5.2.</span> <span class="nav-text">49. Redis 有哪些功能？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#50-Redis-为什么是单线程的？"><span class="nav-number">5.3.</span> <span class="nav-text">50. Redis 为什么是单线程的？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#51-什么是缓存穿透？怎么解决？"><span class="nav-number">5.4.</span> <span class="nav-text">51. 什么是缓存穿透？怎么解决？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#52-Redis-支持的数据类型有哪些？"><span class="nav-number">5.5.</span> <span class="nav-text">52. Redis 支持的数据类型有哪些？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#53-jedis-和-Redisson-有哪些区别？"><span class="nav-number">5.6.</span> <span class="nav-text">53. jedis 和 Redisson 有哪些区别？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#54-怎么保证缓存和数据库数据的一致性？"><span class="nav-number">5.7.</span> <span class="nav-text">54. 怎么保证缓存和数据库数据的一致性？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#55-Redis-持久化有几种方式？"><span class="nav-number">5.8.</span> <span class="nav-text">55. Redis 持久化有几种方式？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#56-Redis-怎么实现分布式锁？"><span class="nav-number">5.9.</span> <span class="nav-text">56. Redis 怎么实现分布式锁？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#57-Redis-分布式锁有什么缺陷？"><span class="nav-number">5.10.</span> <span class="nav-text">57. Redis 分布式锁有什么缺陷？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#58-Redis-如何做内存优化？"><span class="nav-number">5.11.</span> <span class="nav-text">58. Redis 如何做内存优化？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#59-Redis-淘汰策略有哪些？"><span class="nav-number">5.12.</span> <span class="nav-text">59. Redis 淘汰策略有哪些？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#60-Redis-常见的性能问题有哪些？该如何解决？"><span class="nav-number">5.13.</span> <span class="nav-text">60. Redis 常见的性能问题有哪些？该如何解决？</span></a></li></ol></li></ol></div></div></div><script src="//rf.revolvermaps.com/0/0/6.js?i=5kqhmrx8uen&amp;m=7&amp;c=e63100&amp;cr1=ffffff&amp;f=arial&amp;l=0&amp;bv=90&amp;lx=-420&amp;ly=420&amp;hi=20&amp;he=7&amp;hc=a8ddff&amp;rs=80" async></script></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright"><a href="http://www.miitbeian.gov.cn" rel="noopener" target="_blank">粤ICP备18157124号-2</a> &copy; <span itemprop="copyrightYear">2021</span><span class="with-love" id="animate"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">xulin</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">93k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">1:24</span></div><br><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("11/09/2018 05:28:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="虚邻存活："+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script><br></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div><div><div class="addthis_inline_share_toolbox"><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5be8ed83b3d72e21" async></script></div></div></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="/lib/jquery/index.js?v=2.1.3"></script><script src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script src="/lib/three/three.min.js"></script><script src="/lib/three/canvas_lines.min.js"></script><script src="/js/src/utils.js?v=6.6.0"></script><script src="/js/src/motion.js?v=6.6.0"></script><script src="/js/src/scrollspy.js?v=6.6.0"></script><script src="/js/src/post-details.js?v=6.6.0"></script><script src="/js/src/bootstrap.js?v=6.6.0"></script><script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>var GUEST=["nick","mail","link"],guest="nick,mail,link";guest=guest.split(",").filter(function(e){return-1<GUEST.indexOf(e)}),new Valine({el:"#comments",verify:!1,notify:!1,appId:"UB0UdXFamYaPzvz0ePttOdmt-gzGzoHsz",appKey:"c3rW9xD0Aqy3rVB6Eb443HOm",placeholder:"抢沙发啦ヾ(◍°∇°◍)ﾉﾞ",avatar:"mp",meta:guest,pageSize:"10",visitor:!1})</script><script>// Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/src/js.cookie.js?v=6.6.0"></script><script src="/js/src/scroll-cookie.js?v=6.6.0"></script><style>.copy-btn{display:inline-block;padding:6px 12px;font-size:13px;font-weight:700;line-height:20px;color:#333;white-space:nowrap;vertical-align:middle;cursor:pointer;background-color:#eee;background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;user-select:none;outline:0}.highlight-wrap .copy-btn{transition:opacity .3s ease-in-out;opacity:0;padding:2px 6px;position:absolute;right:4px;top:8px}.highlight-wrap .copy-btn:focus,.highlight-wrap:hover .copy-btn{opacity:1}.highlight-wrap{position:relative}</style><script>$(".highlight").each(function(e,t){var n=$("<div>").addClass("highlight-wrap");$(t).after(n),n.append($("<button>").addClass("copy-btn").append("复制").on("click",function(e){var t=$(this).parent().find(".code").find(".line").map(function(e,t){return $(t).text()}).toArray().join("\n"),n=document.createElement("textarea"),o=document.createRange(),a=window.getSelection(),i=window.pageYOffset||document.documentElement.scrollTop;n.style.top=i+"px",n.style.position="absolute",n.style.opacity="0",n.value=t,n.textContent=t,n.contentEditable=!0,n.readOnly=!1,document.body.appendChild(n),o.selectNode(n),a.removeAllRanges(),a.addRange(o),n.setSelectionRange(0,t.length),document.execCommand("copy")?$(this).text("复制成功"):$(this).text("复制失败"),n.blur(),$(this).blur()})).on("mouseleave",function(e){var t=$(this).find(".copy-btn");setTimeout(function(){t.text("复制")},300)}).append(t)})</script><script>!function(n){var o=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(t,e){var n=new Image,o=t.getAttribute("data-original");n.onload=function(){t.src=o,e&&e()},n.src=o}function c(){for(var t=0;t<o.length;t++)0<=(e=o[t].getBoundingClientRect()).top&&0<=e.left&&e.top<=(n.innerHeight||document.documentElement.clientHeight)&&i(o[t],function(){o.splice(t,t)});var e;console.log("trigger")}c(),n.addEventListener("scroll",function(){var t,e;t=c,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script></body></html>